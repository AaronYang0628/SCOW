# clusterops-slurm

用来执行slurm脚本的服务器端程序。

由于本程序运行在容器中，不能直接访问外部的slurm脚本，所以使用`node-ssh`来访问外部的脚本。

# 执行宿主机上的脚本的方案

以下为执行宿主机上的脚本的可能的方案以及各种方案的优缺点：

| 方案                                                                                         | 优势                                                                                              | 劣势                                                                                 |
| -------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------ |
| 从容器SSH到主机上执行脚本                                                                    | - 容器和主机可以部署在不同的机器<br/> - 可以通过控制SSH的命令来控制权限<br/> - 可以获得命令的输出 | - 需要主机开放防火墙<br/> - 证书等配置可能较为麻烦                                   |
| 直接把本项目放在主机执行                                                                     | - 简单直接                                                                                        | - 需要在主机配Node环境<br/> - 监控、日志、CI脚本的配置等不能与其他系统组件共享       |
| 使用Go/Rust等编译为单一可执行文件的项目重写本项目                                            | - 占用资源小<br/> - 部署方便                                                                      | - 监控、日志、CI脚本的配置等不能与其他部件共享<br/> - 项目所使用的工具链需要重新探索 |
| 创建一个[Named Pipe](https://stackoverflow.com/a/63719458)，容器传输命令到此文件中给主机运行 | - 效率高                                                                                          | - 主机和容器启动时都需要配置<br/> - 获取脚本返回值不方便                             |
